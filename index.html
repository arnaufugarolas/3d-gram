<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>3D-gram</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.12.1/firebase-firestore.js"></script>
</head>
<body>
    <form>
        
        <div class="logear" id="loginForm">
        <div class="Index">
            <label for="gmail" class="incio">Correu electrònic:</label>
            <div class="definir">
                <input type="email" class="form-control" id="gmail">
            </div>
        </div>
        <div class="Index">
            <label for="contraseña" class="inicio">Contrasenya:</label>
            <div class="definir">
                <input type="password" class="form-control" id="contraseña">
            </div>
        </div>
        <div class="Index">
            <div class="offset-4 col-8">
                <button type="button" id="usuarionuevo" class="btn btn-outline-primary float-right">Registrar un nou usuari</button>
                <button type="button" id="entrada" class="btn btn-default float-right mr-3">Entrar</button>
            </div> 
        </div>
        </div>

        <div class="col-8 offset-2" id="signupForm" style="display: none;">
            <form>
                <div class="Index">
                    <label for="title" class="col-4 col-form-label">Correu electrònic:</label>
                    <div class="definir">
                        <input type="email" class="form-control" id="Reg_email">
                    </div>
                </div>
                <div class="Index">
                    <label for="content" class="col-4 col-form-label">Contrasenya:</label>
                    <div class="definir">
                        <input type="password" class="form-control" id="Reg_contra">
                    </div>
                </div>
                <div class="Index">
                    <label for="content" class="col-4 col-form-label">Confirmar contrasenya:</label>
                    <div class="definir">
                        <input type="password" class="form-control" id="Reg_confirmar">
                    </div>
                </div>
                <div class="Index">
                    <div class="offset-4 col-8">
                        <button type="button" id="signup" class="btn btn-default float-right">Enviar</button>
                    </div> 
                </div>
            </form>
        </div>
    </form>
    <div id="alert" role="alert"></div>
</body>
<script language="javascript" src="js/config.js"></script>
<script language="javascript" src="js/firestore.js"></script>
<script language="javascript" src="js/storage.js"></script>
<script>
    document.getElementById("entrada").addEventListener("click", function() {
        let email = document.getElementById("gmail").value;
        let password = document.getElementById("contraseña").value;

        function showAlert(text, type) {
            document.getElementById("alert").innerText = text;
            document.getElementById("alert").className = "alert " + type;
            document.getElementById("alert").style.display = "block";
            window.setTimeout(function() {
                document.getElementById("alert").style.display = "none";
            }, 2000);
        }

        auth.signInWithEmailAndPassword(email, password)
            .then(function() {
                showAlert("Usuari autenticat", "alert-success");

                document.getElementById("loginForm").style.display = "none";
                document.getElementById("itemsForm").style.display = "block";
                document.getElementById("listItems").style.display = "table";
            })
            .catch(function(error) {
                showAlert("Error d’autenticació", "alert-danger");
            });
    });
</script>
</html>